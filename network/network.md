# 네트워크 지식

- 프로토콜 : 일종의 약속   
EX.HTTP, SMTP(이메일로 전송할 때), POP3(이메일로 전송받을 때)등
- 이더넷 : 통신 규격
- HTTPS로 암호화 통신을 함
- Cookies VS Session
    - 둘 다 어떠한 변수들을 저장하는 개념
    - `Cookies`는 `클라이언트`에 특정 위치에 저장(구워진다고 해서 쿠키라고 함), 파일이 남음
    - `Session`은 `서버`에 저장(웹서버나 WAS서버 수준에 저장, DB와 다름)
    - Session은 시간을 가지고 있고 일정 시간 후에 다 지움
- `IP`는 주소(naver.com)를 DNS서버에서 숫자로 바꿔줌, `TCP`는 데이터 전달
- 주소가 DNS서버에서 `IP를 찾아가는 경로`를 `라우팅`이라고 함
- 다음 4개로 DOS창에서 네트워크 관련된 것을 확인할 수 있음
    - ipconfig : 자신의 컴퓨터에 IP같은 주소를 알 수 있음
    - ping : 컴퓨터에서 주소가 살아있다면(?) 응답해줌(ping + IP주소)
    - tracert : 해당 URL로 가는 라우팅 정보를 줌(tracert + URL)
    - nslookup : 해당하는 도메인에 해당하는 IP를 응답시켜줌(DNS 서버 조회, nslookup + 도메인 or IP주소)

<br>
<br>
<br>
[참고 링크](https://www.inflearn.com/course/%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C-%EC%95%B1%EA%B0%9C%EB%B0%9C-%EA%B8%B0%EC%88%A0%EB%85%B8%ED%8A%B8/dashboard)   
[AWS책 링크](https://pyrasis.com/aws.html)

# TCP와 UDP
- 전송계층에서 사용되는 프로토콜
  - 전송계층은 송신자와 수신자를 연결하는 통신 서비스를 제공하고 IP에 의해 전달되는 패킷의 오류를 검사하며   
    재전송 요구 제어등을 담당하는 계층
- 포트 번호로 서비스를 식별
  - `포트 번호`라는 숫자를 이용하여 컴퓨터 안의 어떤 서비스(애플리케이션)에게 데이터를 전달하면 좋은지를 식별
  - 포트 번호는 0 ~ 65535(16비트 분)까지의 숫자로 이루어짐, 범위에 따라 용도가 정해짐
  - 0 ~ 1023 : 잘 알려진 포트라고 해서 웹 서버나 메일 서버 등과 같이   
  일반적인 서버 소프트웨어가 클라이언트의 서비스 요청을 대기할 때 사용
  - 1024 ~ 49151 : 등록된 포트로, 제조업체의 독자적인 서버 소프트웨어가 클라이언트의 서비스 요청을 대기할 때 사용
  - 49152 ~ 65535 : 동적 포트로, 서버가 클라이언트를 식별하기 위해 사용
- TCP
  - 개념
    - 연결 지향적 프로토콜(클라이언트와 서버가 연결된 상태에서 데이터를 주고받는 프로토콜)
    - 클라이언트가 연결 요청(SYN 데이터 전송)을 하고, 서버가 연결을 수락하면 통신 선로가 고정되고,   
    모든 데이터는 고정된 통신 선로를 통해서 순차적으로 전달   
    그렇기 때문에 데이터를 정확하고 안정적으로 전달할 수 있음
    - TCP는 호스트간 신뢰성 있는 데이터 전달과 흐름제어를 함
    - 신뢰성있는 데이터 전송을 위해 확인 작업을 거치는데 TCP는 패킷을 성공적으로 전송하면(ACK)라는 신호를 날리고   
    만약에 ACK 신호가 제 시간에 도착하지 않으면 Timeout이 발생하여 패킷 손실이 발생한 패킷을 다시 전송해줌
    - TCP는 이렇게 데이터를 송신할 때마다 확인 응답을 주고받는 절차기 있으므로 통신의 신뢰성이 올라감
    - 주로 lient와 Server 또는 P2P Socket 통신등, 네트워크를 사용한 통신을 할 때 TCP 통신을 많이 사용
  - 단점
    - 데이터로 보내기 전에 반드시 연결이 형성되어야 함
    - 1 : 1 통신만 가능
    - 고정된 통신 선로가 최단선(네트워크 길이)이 아닐 경우 상대적으로 UDP보다 데이터 전송속도가 느림
  - 3-way Handshake & 4-way Handshake
    - 3-way Handshake
      - 통신을 하는 응용프로그램이 데이터를 전송하기 전에 먼저 정확한 전송을 보장하기 위해 상대방 컴퓨터와 사전에 세션을 수립하는 과정을 의미
      - 역할
        - 양쪽 모두 데이터를 전송할 준비가 되었다는 것을 보장
        - 실제로 데이터 전달이 시작하기 전에 한쪽이 다른 쪽이 준비되었다는 것을 알 수 있도록 함
        - 양쪽 모두 상대편에 대한 초기 순차일렬번호를 얻을 수 있도록 함
      - 과정
        1. Client -> Server   
        클라이언트는 서버에 접속을 요청하는 SYN 패킷을 보냄. 이때 클라이언트는 SYN을 보내고 SYN/ACK 응답을 기다리는   
        SYN_SENT상대가 됨
        2. Server -> Client   
        서버는 SYN 요청을 받고 클라이언트에게 요청을 수락한다는 ACK와 SYN flag가 설정된 패킷을 발송   
        클라이언트가 다시 ACK로 응답하기를 기다림   
        이때 서버는 SYN_RECEIVED상태가 됨
        3.  Client -> Server  
        클라이언트는 서버에게 ACK을 보내고 이후로부터는 연결이 이루어지고 데이터가 오가게 되는 것   
        이때의 서버 상태가 ESTABLISHED임
    - 4-way Handshake
      - 3-way Handshake는 초기화할 때 사용한다면, 4-way Handshake는 세션을 종료하기 위해 수행되는 절차
      - 과정
        1. Client -> Server   
        클라이언트가 연결을 종료하겠다는 FIN 플래그를 전송
        2. Server -> Client   
        서버는 일단 확인메세지를 보내고 자신의 통신이 끝날 때까지 기다리는데 이 상태가 TIME_WAIT상태
        3. Server -> Client    
        서버가 통신이 끝났으면 연결이 종료되었다고 클라이언트에게 FIN플래그를 전송
        4. Client -> Server 
        클라이언트는 확인했다는 메세지를 보냄
  - 특징
    - 연결형 서비스로 연결이 성공해야만 통신 가능
    - 데이터의 경계를 구분 X (바이트 스트림 서비스)
    - 데이터의 전송 순서를 보장 (데이터의 순서 유지를 위해 각 바이트마다 번호를 부여)
    - 신뢰성 있는 데이터 전송(Sequence Number, Ack Number를 통한 신뢰성 보장)
    - 데이터 흐름 제어 (수신자 버퍼 오버플로우 방지) 및 혼잡 제어(패킷 수가 과도하게 증하는 현상 방지)
    - 연결의 설정(3-way handshaking)과 해제(4-way handshaking)
    - 전이중(Full-Duplex), 점대점(Point to Point) 서비스
    - UDP보다 전송속도가 느림
  - 3줄 요약
    - 데이터를 `확실`하게 주고받고 싶을 때 사용
    - 통신할 컴퓨터끼리 서로 확인 메세지를 보내면서 데이터를 주고받음으로써 통신의 신뢰성을 높임
    - 웹이나 메일, 파일 공유 등과 같이 데이터를 누락시키고 싶지 않은 서비스에서 사용
- UDP
  - 개념
    - 비연결 지향적 프로토콜(데이터를 주고받을 때 연결 절차를 거치지 않고 발신자가 일방적으로 데이터를 발신하는 방식)
    - 연결 과정이 없기 때문에 TCP보다는 빠른 전송을 할 수 있지만 데이터 전달의 신뢰성이 떨어짐
    - 발신자가 데이터 패킷을 순차적으로 보내더라도 이 패킷들을 서로 다른 통신 선로를 통해 전달 될 수 있음
    - 먼저 보낸 패킷이 느린 선로를 통해 전송될 경우 나중에 보낸 패킷보다 늦게 도착할 수 있으며   
    최악의 경우 잘못된 선로로 전송되어 유실될 수 있음
    - 이럴 경우 TCP와 다르게 UDP는 중간에 패킷이 유실이나 변조가 되어도 재전송 X
  - 단점
    - 데이터의 신뢰성이 없음
    - 의미없는 서버를 구축하기 위해서는 일일이 패킷을 관리
  - 특징
    - 비연결형 서비스로 연결 없이 통신이 가능하며 데이터그램 방식을 제공
    - 데이터 경계를 구분(데이터그램 서비스)
    - 정보를 주고 받을 때 정보를 노내거나 받는다는 신호철차를 거치지 않음
    - 신뢰성 없는 데이터를 전송(데이터 재전송과 데이터 순서 유지를 위한 작업을 하지 않음)
    - 패킷관리가 필요
    - 패킷 오버헤드가 적어 네트워크 부하가 감소되는 장점
    - 상대적으로 TCP보다 전송속도가 빠름
  - 3줄 요약
    - 데이터의 신뢰성보다는 `빨리` 보내고 싶을 때 사용
    - 데이터를 보내고 끝이어서 신뢰성은 없지만 확인 응답같은 절차를 생략할 수 있어 신속성을 높일 수 있음
    - VoIP(Voice over IP)나 시간 동기, 이름 해결 등과 같이 속도를 필요로 하는 서비스에서 사용
<br/>
<br/>
<출처>https://coding-factory.tistory.com/614, 
<출처>[네트워크 쉽게 이해하기 22편](https://mindnet.tistory.com/entry/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-22%ED%8E%B8-TCP-3-WayHandshake-4-WayHandshake)

## HTTP 통신과 Socket 통신
- HTTP 통신
  - HTML 파일을 전송하는 프로토콜
  - 클라이언트에서 서버로 요청을 보내고 서버가 응답하는 방식으로 통신이 이루어짐
  - 단방향 통신
  - 응답을 받은 후 Connection이 끊어지는 것이 기본 동작이지만, 성능 상으로 필요하다면   
  Keep Alive 옵션을 주어 일정 시간 동안 Connection을 유지하는 것이 가능
- Socket 통신
  - 소켓은 두 프로그램이 서로 데이터를 주고 받을 수 있는 양쪽에 생성되는 통신 단자
  - 서버와 클라이언트 양방향 연결이 이루어지는 통신
  - 양방향 통신
  - 보통 스트리밍이나 실시간 채팅 등 실시간으로 데이터를 주고 받아야 하는 경우   
  Connection을 자주 맺고 끊는 HTTP 통신보다 소켓 통신이 적합
  - 계속해서 Connection을 들고 있기 때문에 HTTP 통신에 비해 많은 리소스가 소모
